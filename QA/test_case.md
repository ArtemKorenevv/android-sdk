Сквозные позитивные сценарии
============================

Сквозной сценарий работы SDK:
-----------------------------

1.  Пользователь выбрал оплату онлайн через приложение:

    a.  Открывается SDK

    b.  **ЕСЛИ** у пользователя имеются ранее сохраненных связок, **ТО** отображается экран выбора карты. **Переход к шагу 2.**

    c.  **ЕСЛИ** у пользователя нет ранее сохраненных связок, **ТО**       отображается экран ввода данных карты. **Переход к шагу 4**

2.  Пользователь нажимает на карту из списка:

    a.  Отображается экран с шаблоном карты и кнопкой оплатить

    b.  **ЕСЛИ** в настройках SDK выбран режим *с вводом* CVC/CVV, **ТО** на шаблоне карты *отображается поле для ввода CVC/CVV кода*. **Переход к шагу 3.**

    c.  **ЕСЛИ** в настройках SDK выбран режим *без ввода* CVC/CVV, **ТО**    на шаблоне карты *не отображается поле для ввода CVC/CVV кода.* **Переход к шагу 5.**

3.  Пользователь вводит CVC/CVV код:

    a.  **Переход к шагу 5.**

4.  Пользователь заполняет корректные данные о новой карте в зависимости
    от выбранных настроек SDK:

    a.  **Переход к шагу 5.**

5.  Пользователь нажимает кнопку оплаты:

    a.  SDK отправляет данные в платежный шлюз

Оплата новой картой с минимальным набором полей (без использования сканера):
----------------------------------------------------------------------------

### Условия начала кейса:

-   Пользователь «приложения» выбрал оплату картой

-   У пользователя нет сохраненных связок или сохранение связок
    запрещено настройками SDK

-   Отображается экран ввода данных банковской карты

### Шаги сценария:

1.  Проверить отображение экрана ввода данных карты:

    a.  Отображается шаблон обезличенной карты

    b.  Отображается поле ввода «Номер карты»

    c.  Отображается поле ввода «Срок действия карты»

    d.  Отображается поле ввода «CVC2/CVV2»

    e.  Отображаются логотипы платежных систем, под полями ввода

    f.  Отображается кнопка оплатить

2.  Нажать в поле ввода «Номер карты»:

    a.  В поле «Номер карты» отображается курсор ввода

    b.  Placeholder: «Номер карты», отображается над полем ввода

3.  Ввести первые 6 цифр номера карты:

    a.  **ЕСЛИ** на шаблоне карты отображается: платежная система **И** введенные цифры **И** банк карты: \[логотип, цвет\], то **переход на шаг 5.**

    b.  **ЕСЛИ** на шаблоне карты отображается только: платежная система **И** введенные цифры, то **переход на шаг 4.**

4.  Ввести еще две цифры номера карты:

    a.  На шаблоне карты отображается: платежная система **И** введенные цифры **И** банк карты: \[логотип, цвет\]

5.  Ввести оставшиеся цифры номера карты:

    a.  На модели карты отображается введенный номер карты **И** платежная система **И** банк карты: \[цвет, логотип\])

    b.  Курсор ввода переместился в поле ввода «Срок действия карты»

    c.  Над полем ввода «Срок действия карты» отображается placeholder MM/YY

6.  Ввести номер месяца окончания действия карты двумя цифрами, в поле
    ввода (Если у месяца однозначный номер {Например: 5}, то ввести
    нужно {05}):

    a.  В поле ввода отображается введенные цифры

    b.  После ввода номера месяца автоматически добавляется символ «/» в      поле ввода

    c.  На шаблоне карты отображаются введенные символы

7.  Ввести год окончания действия карты в поле ввода:

    a.  Курсор ввода переместился в поле ввода «CVC2/CVV2»

    b.  В поле ввода «Срок действия карты» отображаются введенные       значения в формате: «ММ/ГГ»

    c.  На шаблоне карты отображаются введенная дата окончания действия       карты

8.  Ввести CVC2/CVV2 код в поле ввода:

    a.  Введенные цифры закрываются маской

9.  Нажать кнопку «Оплатить»:

    a.  Отображается сообщение: «New card false»

    b.  Отображается сообщение с криптограммой

    c.  Экран ввода данных закрывается

Оплата картой со всеми полями ввода (с использованием сканера):
---------------------------------------------------------------

### Условия начала кейса:

-   Пользователь «приложения» выбрал оплату картой

-   У пользователя нет сохраненных связок или сохранение связок
    запрещено настройками SDK

-   Отображается экран ввода данных банковской карты

-   В настройках SDK разрешено использование сканера

### Шаги сценария:

1.  Проверить отображение экрана ввода данных карты:

    a.  Отображается шаблон обезличенной карты

    b.  Отображается поле ввода «Номер карты»

    c.  В поле ввода номер карты отображается иконка «Сканера»

    d.  Отображается поле ввода «Срок действия карты»

    e.  Отображается поле ввода «CVC2/CVV2»

    f.  Отображается поле ввода «Имя фамилия»

    g.  Отображается чек-бокс «Сохранить карту»

    h.  Отображаются логотипы платежных систем, под всеми полями ввода

    i.  Отображается кнопка оплатить

2.  Нажать на иконку сканера в поле ввода «Номер карты»:

    a.  Отображается экран сканера карты

3.  Сканировать банковскую карту:

    a.  Отображается экран ввода данных

    b.  На шаблоне карты отображается введенный номер карты **И** платежная система **И** банк карты: \[цвет, логотип\])

    c.  Курсор ввода переместился в поле ввода «Срок действия карты»

    d.  Над полем ввода «Срок действия карты» отображается placeholder MM/YY

4.  Ввести номер месяца окончания действия карты двумя цифрами, в поле
    ввода (Если у месяца однозначный номер {Например: 5}, то ввести
    нужно {05}):

    a.  В поле ввода отображается введенные цифры

    b.  После ввода номера месяца автоматически добавляется символ «/» в поле ввода

    c.  На шаблоне карты отображаются введенные символы

5.  Ввести год окончания действия карты в поле ввода:

    a.  Курсор ввода переместился в поле ввода «CVC2/CVV2»

    b.  В поле ввода «Срок действия карты» отображаются введенные       значения в формате: «ММ/ГГ»

    c.  На шаблоне карты отображаются введенная дата окончания действия      карты

6.  Ввести CVC2/CVV2 код в поле ввода:

    a.  Введенные цифры закрываются маской

    b.  Курсор переместился в поле ввода «Имя Фамилия»

7.  Ввести Имя и Фамилию владельца карты латинскими символами:

    a.  На шаблоне карты отображаются введенные символы

8.  Проверить значение чек-бокса «Сохранить карту»:

    a.  **ЕСЛИ** в чек-боксе установлена отметка, **ТО переход к        шагу 10.**

    b.  **ЕСЛИ** в чек-боксе не установлена отметка, **ТО переход к шагу 9.**

9.  Нажать на чек-бокс «Сохранить карту»:

    a.  В чек-боксе отображается установленная отметка

10. Нажать кнопку «Оплатить»:

    a.  Отображается сообщение: «New card true»

    b.  Отображается сообщение с криптограммой

    c.  Экран ввода данных закрывается

Выбор сохраненной карты:
------------------------

### Условия начала кейса:

-   Пользователь «приложения» выбрал оплату картой

-   У пользователя нет сохраненных связок или сохранение связок
    запрещено настройками SDK

-   Отображается экран ввода данных банковской карты

-   В настройках SDK разрешено использование сканера

### Шаги сценария:

1.  Отображается экран выбора карты:

    a.  Отображается список сохраненных карт «Связок»

    b.  Отображается кнопка «Оплатить новой картой»

2.  Пользователь нажимает на карту из списка:

    a.  Отображается экран подтверждения оплаты

    b.  На экране отображается шаблон карты

    c.  На экране отображается кнопка оплаты

Оплата сохраненной картой (Без ввода CVC/CVV кода):
---------------------------------------------------

### Условия начала кейса:

-   Пользователь «приложения» выбрал оплату картой

-   У пользователя имеются сохраненные карты(связки)

-   В настройках SDK разрешена оплата без ввода CVC/CVV кода

-   Отображается экран выбора сохраненной карты

### Шаги сценария:

1.  Пользователь выбирает карту из списка сохраненных для оплаты:

    a.  Отображается экран подтверждения оплаты

    b.  На экране отображается шаблон карты без поля для ввода CVC/CVV кода

    c.  На экране отображается кнопка оплаты

    d.  На экране отображается сумма платежа

2.  Пользователь нажимает кнопку оплаты:

    a.  Отображается сообщение содержащие UUID сохраненной связки

    b.  Отображается сообщение с криптограммой

    c.  Экран подтверждения оплаты закрывается

Оплата сохраненной картой (С вводом CVC/CVV кода):
--------------------------------------------------

### Условия начала кейса:

-   Пользователь «приложения» выбрал оплату картой

-   У пользователя имеются сохраненные карты(связки)

-   В настройках SDK запрещена оплата без ввода CVC/CVV кода

-   Отображается экран выбора сохраненной карты

### Шаги сценария:

1.  Пользователь выбирает карту из списка сохраненных для оплаты:

    a.  Отображается экран подтверждения оплаты

    b.  На экране отображается шаблон карты с полем для ввода CVC/CVV кода

    c.  На экране отображается кнопка оплаты

    d.  На экране отображается сумма платежа

2.  Пользователь нажимает кнопку оплаты:

    a.  Отображается сообщение содержащие UUID сохраненной связки

    b.  Отображается сообщение с криптограммой

    c.  Экран подтверждения оплаты закрывается

Негативные сценарии
===================

Заполнение поля «Номер карты»:
------------------------------

1.  Ввести символы в поле:

    a.  Ввод символов не возможен.

2.  Ввести спецсимволы/знаки препинания в поле ввода:

    a.  Ввод спецсимволов не возможен.

3.  Ввести менее 16 цифр:

    a.  Отображаются введенные значения

4.  Нажать кнопку оплаты:

    a.  Под полем отображается сообщение об ошибке с текстом: «Длинна номера карты должна быть 16-19 цифр»

5.  Ввести некорректный номер карты:

    a.  Отображаются введенные значения

6.  Нажать кнопку оплаты:

    a.  Под полем отображается сообщение об ошибке с текстом: «Номер        карты указан неверно»

7.  Оставить поле пустым

8.  Нажать кнопку оплаты:

    a.  Под полем отображается сообщение об ошибке с текстом: «Номер        карты указан неверно»

Заполнение поля «MM/YY»:
------------------------

1.  Ввести символы в поле:

    a.  Ввод символов не возможен.

2.  Ввести спецсимволы/знаки препинания в поле ввода:

    a.  Ввод спецсимволов не возможен.

3.  Ввести месяц больше 12:

    a.  Отображаются введенные значения

    b.  Отображается символ «\\»

4.  Ввести значение года равное текущий год -- 1 год:

    a.  Отображается введенное значение

5.  Нажать кнопку оплаты:

    a.  Отображается сообщение об ошибке: «Срок действия карты указан        неверно»

6.  Ввести значение года равное текущий год + 11 лет:

    a.  Отображается введенное значение

7.  Нажать кнопку оплаты:

    a.  Отображается сообщение об ошибке: «Срок действия карты указан        неверно»

8.  Стереть символ «/» и нажать кнопку оплаты:

    a.  Отображается сообщение об ошибке: «Срок действия карты указан        неверно»

9.  Оставить пустым поле «MM/YY»

10. Нажать кнопку оплаты:

    a.  Под полем отображается текст ошибки: «Срок действия карты указан        неверно»

Заполнение поля «Имя фамилия»:
------------------------------

1.  Ввести цифры:

    a.  Ввод цифр не возможен

2.  Ввести символы кириллицы:

    a.  Ввод символов кириллицы не возможен

3.  Ввести спецсимволы:

    a.  Ввод спецсимволов кроме пробела не возможен

4.  Оставить пустым поле «Имя фамилия»

5.  Нажать кнопку оплаты:

    a.  Под полем отображается текст ошибки: «Владелец карты указан        неверно»

6.  Ввести не корректные имя и фамилию владельца карты:

    a.  Под полем отображается введенное значение

7.  Нажать кнопку оплаты:

    a.  Под полем отображается текст ошибки: «Владелец карты указан        неверно»

Заполнение поля «CVC/CVV»:
--------------------------

1.  Ввести не корректный CVC/CVV код:

    a.  Введенные символы закрываются маской

2.  Нажать кнопку оплатить:

    a.  Под полем отображается текст ошибки: «CVC2/CVV2 указан неверно»

3.  Оставить пустым поле «CVC/CVV»

4.  Нажать кнопку оплаты:

    a.  Под полем отображается текст ошибки: «CVC2/CVV2 указан неверно»

Отмена оплаты сохраненной картой:
---------------------------------

1.  Открыть меню выбора сохранённых карт

    a.  Отображается список сохраненных карт

2.  Нажать на карту из списка

    a.  Отображается экран подтверждения оплаты

3.  Нажать кнопку назад в верхней панели или кнопку назад в телефоне

    a.  Отображается каталог товаров
